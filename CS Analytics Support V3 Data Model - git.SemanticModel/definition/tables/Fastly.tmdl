table Fastly
	lineageTag: 709b379b-fd2a-4201-9a84-cbe71dd35c4e

	column service_id
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 8268e38a-d64c-47b5-a315-ac5a66a4cc34
		summarizeBy: none
		sourceColumn: service_id

		annotation SummarizationSetBy = Automatic

	column service_name
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: a888a1a3-73d4-491e-8b4e-a3a175113ad2
		summarizeBy: none
		sourceColumn: service_name

		annotation SummarizationSetBy = Automatic

	column id
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 3b710624-764b-438a-bc22-4303d1475b6c
		summarizeBy: none
		sourceColumn: id

		annotation SummarizationSetBy = Automatic

	column id_type
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 6b6fb7c3-f8b9-4406-84a7-0dca218d37d1
		summarizeBy: none
		sourceColumn: id_type

		annotation SummarizationSetBy = Automatic

	column begin_time
		dataType: dateTime
		formatString: General Date
		sourceProviderType: datetimeoffset
		lineageTag: 6983e48a-749a-4753-b66e-e8c8d2fd9891
		summarizeBy: none
		sourceColumn: begin_time

		annotation SummarizationSetBy = Automatic

	column end_time
		dataType: dateTime
		formatString: General Date
		sourceProviderType: datetimeoffset
		lineageTag: 6a662e80-92e9-45a2-a815-7677af24a8df
		summarizeBy: none
		sourceColumn: end_time

		annotation SummarizationSetBy = Automatic

	column elapsed
		dataType: int64
		formatString: 0
		sourceProviderType: bigint
		lineageTag: 66fc2e4c-68d0-4aba-99b3-e2247c8733de
		summarizeBy: sum
		sourceColumn: elapsed

		annotation SummarizationSetBy = Automatic

	column client_ip
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 2dfa3306-8218-4e97-9e37-45f8530d294e
		summarizeBy: none
		sourceColumn: client_ip

		annotation SummarizationSetBy = Automatic

	column proto
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 3ce3b792-1bb9-4f9f-a4d8-70465c353291
		summarizeBy: none
		sourceColumn: proto

		annotation SummarizationSetBy = Automatic

	column orig_host
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: be6cd71d-d30a-4844-8943-a2e4c0c048bf
		summarizeBy: none
		sourceColumn: orig_host

		annotation SummarizationSetBy = Automatic

	column host
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 7c9406c8-0c1a-4b89-8beb-183be676187a
		summarizeBy: none
		sourceColumn: host

		annotation SummarizationSetBy = Automatic

	column request_method
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: ce8525e0-7808-40a8-b34b-10fae36d99df
		summarizeBy: none
		sourceColumn: request_method

		annotation SummarizationSetBy = Automatic

	column path
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 3ee9c843-808a-4d99-9795-d94b2c8503f0
		summarizeBy: none
		sourceColumn: path

		annotation SummarizationSetBy = Automatic

	column url
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 6a650ce3-a176-44f8-891a-424261a6b489
		summarizeBy: none
		sourceColumn: url

		annotation SummarizationSetBy = Automatic

	column continent_code
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 3392707d-a29b-4f57-9528-6a4645bdcedf
		summarizeBy: none
		sourceColumn: continent_code

		annotation SummarizationSetBy = Automatic

	column country_code
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 2651dbfd-1c25-4e3b-a65a-e495b7ea5194
		summarizeBy: none
		sourceColumn: country_code

		annotation SummarizationSetBy = Automatic

	column country_name
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: e4428bd1-4f79-4c89-895f-cb83b5d824b5
		summarizeBy: none
		sourceColumn: country_name

		annotation SummarizationSetBy = Automatic

	column region
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 0ed854fa-9fa5-4b6c-924a-b2c46b083a9f
		summarizeBy: none
		sourceColumn: region

		annotation SummarizationSetBy = Automatic

	column city
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: f7f4fccf-27fc-41a6-b2b3-f28bf15daca5
		summarizeBy: none
		sourceColumn: city

		annotation SummarizationSetBy = Automatic

	column referer
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 05eb80d7-1592-4f95-87e9-6da75a18067d
		summarizeBy: none
		sourceColumn: referer

		annotation SummarizationSetBy = Automatic

	column user_agent
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 740c9c9f-36ef-441b-84e4-625e88c0805e
		summarizeBy: none
		sourceColumn: user_agent

		annotation SummarizationSetBy = Automatic

	column datacenter
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 03ace906-298a-4667-8e8f-097fbd0e9767
		summarizeBy: none
		sourceColumn: datacenter

		annotation SummarizationSetBy = Automatic

	column server_identity
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 6d303c60-129a-4028-9254-060981ed9e00
		summarizeBy: none
		sourceColumn: server_identity

		annotation SummarizationSetBy = Automatic

	column status
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 3dba9121-2086-4a69-9a1b-d38013cf5283
		summarizeBy: none
		sourceColumn: status

		annotation SummarizationSetBy = Automatic

	column content_type
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 4f4f725f-adde-4e87-978f-07a189250a69
		summarizeBy: none
		sourceColumn: content_type

		annotation SummarizationSetBy = Automatic

	column bytes_written
		dataType: int64
		formatString: 0
		sourceProviderType: bigint
		lineageTag: e12273a5-05b0-4370-84b8-4a902f124855
		summarizeBy: sum
		sourceColumn: bytes_written

		annotation SummarizationSetBy = Automatic

	column bytes_read
		dataType: int64
		formatString: 0
		sourceProviderType: bigint
		lineageTag: c8520e67-af61-499f-b199-e61822e650f0
		summarizeBy: sum
		sourceColumn: bytes_read

		annotation SummarizationSetBy = Automatic

	column visits_this_service
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: 4a95a17b-e752-4910-bf5b-07d4729c58fc
		summarizeBy: none
		sourceColumn: visits_this_service

		annotation SummarizationSetBy = Automatic

	column state
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: e353dc0d-b377-48d9-b849-e946d170e326
		summarizeBy: none
		sourceColumn: state

		annotation SummarizationSetBy = Automatic

	column client_identified
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: 1fbfd838-c849-43ad-8078-c25263257074
		summarizeBy: none
		sourceColumn: client_identified

		annotation SummarizationSetBy = Automatic

	column client_bot_name
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 8c0c08b4-b0ad-4691-9662-9c2a43315c72
		summarizeBy: none
		sourceColumn: client_bot_name

		annotation SummarizationSetBy = Automatic

	column client_class_bot
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: 6a6fe8f6-b847-4edd-9796-460392b48777
		summarizeBy: none
		sourceColumn: client_class_bot

		annotation SummarizationSetBy = Automatic

	column client_class_browser
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: 8f153ccf-cd26-4273-9a50-6c1425305a21
		summarizeBy: none
		sourceColumn: client_class_browser

		annotation SummarizationSetBy = Automatic

	column client_class_checker
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: cc57befd-1166-4cb8-b8cc-de3cd52f00f5
		summarizeBy: none
		sourceColumn: client_class_checker

		annotation SummarizationSetBy = Automatic

	column client_class_downloader
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: 9fa5b5c7-86ec-4f7d-9f1b-ec5e5d233c31
		summarizeBy: none
		sourceColumn: client_class_downloader

		annotation SummarizationSetBy = Automatic

	column client_class_feedreader
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: 88f4cde0-3e11-45c3-b765-f734a738786d
		summarizeBy: none
		sourceColumn: client_class_feedreader

		annotation SummarizationSetBy = Automatic

	column client_class_filter
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: c66eaa6c-2005-48c8-9634-873c5b06a5e5
		summarizeBy: none
		sourceColumn: client_class_filter

		annotation SummarizationSetBy = Automatic

	column client_class_masquerading
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: ac2f1273-4fcf-4f4e-ba40-180093fe5efa
		summarizeBy: none
		sourceColumn: client_class_masquerading

		annotation SummarizationSetBy = Automatic

	column client_class_spam
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: 021b05fe-0732-409e-9690-96af34f513e3
		summarizeBy: none
		sourceColumn: client_class_spam

		annotation SummarizationSetBy = Automatic

	column custom_properties
		dataType: string
		lineageTag: e6e0b447-ff5c-4d54-8295-166d65c73e0d
		summarizeBy: none
		sourceColumn: custom_properties

		annotation SummarizationSetBy = Automatic

	column log_uuid
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 89e8ebd2-2f06-43c8-8632-a3708932ff22
		summarizeBy: none
		sourceColumn: log_uuid

		annotation SummarizationSetBy = Automatic

	column baseFilePath
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: d55928dd-ff6b-4dee-8e7e-8902e029d32c
		summarizeBy: none
		sourceColumn: baseFilePath

		annotation SummarizationSetBy = Automatic

	column SessionInterval
		dataType: dateTime
		formatString: General Date
		sourceProviderType: datetimeoffset
		lineageTag: 48cd9f93-834a-4177-ba10-985a4a90ff7d
		summarizeBy: none
		sourceColumn: SessionInterval

		annotation SummarizationSetBy = Automatic

	column notContainPng
		dataType: boolean
		formatString: """TRUE"";""TRUE"";""FALSE"""
		sourceProviderType: bit
		lineageTag: 56d707d3-6188-40d5-8b37-1bfb23db47d4
		summarizeBy: none
		sourceColumn: notContainPng

		annotation SummarizationSetBy = Automatic

	column FilePathWithoutDollar
		dataType: string
		sourceProviderType: nvarchar(max)
		lineageTag: 5b0e957a-7007-458f-8b54-9449026c9fc1
		summarizeBy: none
		sourceColumn: FilePathWithoutDollar

		annotation SummarizationSetBy = Automatic

	column weekWise
		dataType: dateTime
		formatString: General Date
		sourceProviderType: datetimeoffset
		lineageTag: 5a31182f-f38f-4133-8e33-34ce7ed718a9
		summarizeBy: none
		sourceColumn: weekWise

		annotation SummarizationSetBy = Automatic

	column dayWise
		dataType: dateTime
		formatString: General Date
		sourceProviderType: datetimeoffset
		lineageTag: 133a4374-17f9-425f-b0d0-2962c4828b4e
		summarizeBy: none
		sourceColumn: dayWise

		annotation SummarizationSetBy = Automatic

	column HoursAgo = ```
			
			DATEDIFF(Fastly[begin_time], UTCNOW(), HOUR)
			
			```
		formatString: 0
		lineageTag: 1d712f87-21d5-4653-8baf-e4322ad06a27
		summarizeBy: sum

		annotation SummarizationSetBy = Automatic

	partition Fastly = m
		mode: directQuery
		source =
				let
				    Source = AzureDataExplorer.Contents("https://cdnfastly.eastus.kusto.windows.net/", "fastlylogs", "cluster(""https://cdnfastly.eastus.kusto.windows.net/"").database(""fastlylogs"").fastly#(lf)| where service_name == ""pages"" #(lf)| where host == ""support-kb.githubapp.com"" #(lf)| where path has ""/support/""#(lf)| extend baseFilePath = tostring(substring(path, strlen(""/support/"")))#(lf)| extend baseFilePath = iif(baseFilePath == """", ""support"", baseFilePath)#(lf)| extend baseFilePath = trim_end(""/"", baseFilePath) // cut off the file extension because values have to match exactly#(lf)| extend SessionInterval = bin(begin_time, 5m)#(lf)| extend notContainPng = path !contains "".png""#(lf)| extend FilePathWithoutDollar =  trim(""/$"", tostring(path))#(lf)|extend dayWise= bin(begin_time, 1d)#(lf)|extend weekWise  = bin(begin_time, 7d)", [MaxRows=null, MaxSize=null, NoTruncate=null, AdditionalSetStatements=null])
				in
				    Source

	annotation PBI_NavigationStepName = Navigation

	annotation PBI_ResultType = Exception

